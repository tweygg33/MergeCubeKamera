<!DOCTYPE html>
<html>
  <head>
    <title>AR.js Anwendung</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
        <a-scene embedded id="scene" arjs='sourceType: webcam; videoConstraints: {"facingMode": {"ideal": "environment"}}'>

    
      
            <!-- <a-marker preset='hiro'>
              <a-box position='0 0.5 0' material='color: blue;' scale='0.5 0.5 0.5'></a-box>
            </a-marker> -->
              <!-- First Hiro Marker showing model from angle 1 -->
              <!-- <a-marker preset='hiro'> -->
                  <!-- GLB Model - Angle 1 -->
                  <!-- <a-entity
                    gltf-model="url(free_porsche_911_carrera_4s.glb)"
                    scale="0.5 0.5 0.5"
                    position="0 0 0"
                    rotation="270 270 90">
                  </a-entity> -->
              <!-- </a-marker> -->
       
              <!-- Second Hiro Marker showing model from angle 2 -->
              <a-marker type="pattern" url="patter\cube1.patt"> <!-- You can change 'kanji' to a different marker -->
                  <!-- GLB Model - Angle 2 -->
                  <a-entity
                    gltf-model="url(free_porsche_911_carrera_4s.glb)"
                    scale="0.4 0.4 0.4"
                    position="0 0 0"
                    rotation="0 -45 0">
                  </a-entity>
              </a-marker>
    </a-scene>

    <script>
      // Dokument geladen
      document.addEventListener('DOMContentLoaded', function() {
        // 1. Kamerazugriff anfordern
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(function(stream) {
            // 2. GerÃ¤te auflisten
            return navigator.mediaDevices.enumerateDevices();
          })
          .then(function(devices) {
            // 2.1 Hauptkamera identifizieren
            var videoDevices = devices.filter(function(device) {
              return device.kind === 'videoinput';
            });

            var mainCamera = null;

            videoDevices.forEach(function(device) {
              var label = device.label.toLowerCase();
              if (label.includes('back') || label.includes('rear')) {
                if (!label.includes('tele') && !label.includes('zoom') && !label.includes('ultra')) {
                  mainCamera = device;
                }
              }
            });

            if (!mainCamera) {
              mainCamera = videoDevices.find(function(device) {
                return device.label.toLowerCase().includes('back') || device.label.toLowerCase().includes('rear');
              });
            }

            if (!mainCamera && videoDevices.length > 0) {
              mainCamera = videoDevices[0];
            }

            if (mainCamera) {
              // 3. AR.js initialisieren
              var sceneEl = document.querySelector('#scene');
              sceneEl.setAttribute('arjs', `sourceType: webcam; deviceId: ${mainCamera.deviceId}`);
            } else {
              console.error('Keine geeignete Kamera gefunden.');
            }
          })
          .catch(function(err) {
            console.error('Fehler:', err);
          });
      });
    </script>
  </body>
</html>
